function CurrencyConverter(){"use strict";if(!(this instanceof CurrencyConverter))throw new Error("CurrencyConverter needs to be called with the 'new' keyword");this.self=arguments[0]}CurrencyConverter.prototype.init=function(){form=this.self.querySelectorAll("[name='currency-form']")[0],convertedCurrency=form.querySelectorAll("[name='converted-currency']")[0],convertedAmount=form.querySelectorAll("[name='converted-amount']")[0],btnDisclaimer=this.self.querySelectorAll(".btn-disclaimer")[0],this.addEvents()},CurrencyConverter.prototype.destroy=function(){console.log("destroy method...")},CurrencyConverter.prototype.addEvents=function(){convertedCurrency.addEventListener("change",function(){this.self.querySelectorAll("[name='btn-submit']")[0].click()}.bind(this),!1),form.addEventListener("submit",function(e){e.preventDefault();var r=this.self.querySelectorAll("[name='currency-form']")[0],t={currentAmount:r.querySelectorAll("[name='current-amount']")[0].value,currentCurrency:r.querySelectorAll("[name='current-currency']")[0].value,convertedCurrency:r.querySelectorAll("[name='converted-currency']")[0].value};return"0"===t.currentAmount?(this.setConvertedAmount(0),!1):t.currentCurrency===t.convertedCurrency?(this.setConvertedAmount(t.currentAmount),!1):void this.submitCurrencyForm(t)}.bind(this),!1),btnDisclaimer.addEventListener("click",function(){var e=this.getAttribute("data-target"),r=this.offsetParent.querySelectorAll(e)[0];toggleVisibility(r)})},CurrencyConverter.prototype.calculateAmount=function(e,r){return parseFloat(r)/parseFloat(e)},CurrencyConverter.prototype.getRates=function(e,r){var t=new XMLHttpRequest;t.open("GET","http://api.fixer.io/latest?base="+e,!0),t.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);r(e)}else console.log("Error","Reached target server, but it returned an error"),console.log("Error",t.responseText)},t.onerror=function(){console.log("Error","An connection error occurred during the transaction"),console.log("Error",t.responseText)},t.send()},CurrencyConverter.prototype.setConvertedAmount=function(e){this.self.querySelectorAll("[name='converted-amount']")[0].value=e},CurrencyConverter.prototype.setDisclaimer=function(e,r,t,n){var o=this.self.querySelectorAll(".disclaimer")[0];o.querySelectorAll(".rate-name")[0].innerHTML=e,o.querySelectorAll(".input")[0].innerHTML=r,o.querySelectorAll(".output")[0].innerHTML=n,o.querySelectorAll(".rate-value").forEach(function(e){e.innerHTML=t})},CurrencyConverter.prototype.submitCurrencyForm=function(e){this.getRates(e.currentCurrency,function(r){console.log(r);var t=this.calculateAmount(e.currentAmount,r.rates[e.convertedCurrency]);this.setConvertedAmount(t),this.setDisclaimer(e.convertedCurrency,e.currentAmount,r.rates[e.convertedCurrency],t)}.bind(this))},toggleVisibility=function(e){"hidden"===e.style.visibility?(e.style.opacity=1,e.style.visibility="visible"):(e.style.opacity=0,e.style.visibility="hidden")};
